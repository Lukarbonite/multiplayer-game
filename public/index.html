<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplayer Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<!-- Start Screen Overlay -->
<div id="start-screen">
    <!-- MODIFIED: Wrapped form and new settings in a container for layout -->
    <div class="start-content">
        <div class="start-form">
            <h1>Join the Game</h1>
            <p id="final-score" class="hidden"></p>
            <input type="text" id="nickname-input" placeholder="Enter your nickname" maxlength="15">
            <label for="color-picker">Choose your color:</label>
            <input type="color" id="color-picker" value="#3498db">
            <label for="image-picker">Or upload an image (replaces color):</label>
            <input type="file" id="image-picker" accept="image/png, image/jpeg, image/gif">
            <button id="play-button">Play</button>
            <p id="error-message" class="hidden"></p>
        </div>

        <!-- NEW: Performance Settings Panel -->
        <div id="performance-settings">
            <h2>Settings</h2>
            <div class="setting-item">
                <label for="setting-resolution">High Resolution</label>
                <input type="checkbox" id="setting-resolution">
            </div>
            <div class="setting-item">
                <label for="setting-graphics">High Quality Graphics</label>
                <input type="checkbox" id="setting-graphics">
            </div>
            <!-- START: ADDED NEW SETTINGS -->
            <div class="setting-item">
                <label for="setting-smoothcells">Smooth Cell Animation</label>
                <input type="checkbox" id="setting-smoothcells">
            </div>
            <div class="setting-item">
                <label for="setting-particles">Particle Effects</label>
                <input type="checkbox" id="setting-particles">
            </div>
            <div class="setting-item">
                <label for="setting-framerate">Frame Rate Limit</label>
                <select id="setting-framerate">
                    <option value="30">30 FPS</option>
                    <option value="60" selected>60 FPS</option>
                    <option value="120">120 FPS</option>
                    <option value="144">144 FPS</option>
                </select>
            </div>
            <div class="setting-item">
                <label for="setting-renderdistance">Render Distance</label>
                <select id="setting-renderdistance">
                    <option value="1000">Low</option>
                    <option value="1500" selected>Medium</option>
                    <option value="2000">High</option>
                    <option value="3000">Ultra</option>
                </select>
            </div>
            <!-- END: ADDED NEW SETTINGS -->
            <div class="setting-item">
                <label for="setting-nicknames">Show Nicknames</label>
                <input type="checkbox" id="setting-nicknames">
            </div>
            <div class="setting-item">
                <label for="setting-images">Show Player Images</label>
                <input type="checkbox" id="setting-images">
            </div>
            <p class="settings-info">
                Settings are saved automatically. <br>
                Lowering quality can improve performance on older devices.
            </p>
        </div>
    </div>
</div>

<!-- Chat Console -->
<div id="chat-console" class="hidden">
    <div id="chat-header">
        <span id="chat-title">Chat</span>
        <button id="chat-toggle" onclick="toggleChat()">−</button>
    </div>
    <div id="chat-content">
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Press Enter to chat..." maxlength="100">
        </div>
    </div>
</div>

<!-- Custom Mobile Keyboard -->
<div id="mobile-keyboard">
    <!-- Close button is now a direct child, positioned with CSS -->
    <button id="keyboard-close">✕</button>
    <div id="keyboard-keys"></div>
</div>

<canvas id="gameCanvas"></canvas>

<script src="/socket.io/socket.io.js"></script>
<script src="game.js"></script>
</body>
</html>